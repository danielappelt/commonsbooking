function cb_process(){var b=jQuery,e=b(this);b("body.cb-WP_DEBUG-on").length,e.find("label p, label span").click(function(e){var t,a=b(this).parent("label");a.length&&(t=a.attr("for"),a.parent().find("#"+t+":visible").click())}),e.find("form").on("submit",function(){var e=b(this).find(".cb-submit");e.val(e.val()+" ..."),b(window).off("beforeunload.edit-post"),setTimeout(function(){e.addClass("disabled")})}),e.find("form").submit(function(){b(this).find(".cb-form-disable").attr("disabled","1"),b(this).find("li.cb-selected").each(function(){b(this).closest("ul").find("li:not(.cb-selected) input").attr("disabled","1")})}),e.find("a.thickbox").each(function(){var e=b(this).attr("href");-1==e.indexOf("cb_load_normal_page")&&-1==e.indexOf("cb_load_template")&&(e+=(-1==e.indexOf("?")?"?":"&")+"cb_load_normal_page=1",b(this).attr("href",e))}),e.find(".cmb2-id-period-status-type-ID input").click(function(){var e=b(this).closest("body, .cb-popup"),t=b(this).parent().find("label"),a=e.attr("class"),i=t.text().toLowerCase().replace(/[^a-z]+/g,"-").replace(/^-+|-+$/g,""),c=b(this).val();a=(a=(a=(a=" "+a+" ").replace(/ +cb-status-[^ ]+/g," "))+"cb-status-"+i+" cb-status-"+c).replace(/ +/," ").trim(),e.attr("class",a),e.css("background-color","")}),e.find(".cb-form").on("submit",function(){var t=this;setTimeout(function(){var e=b(t).find(":input[type=submit]");e.val(e.val()+" ..."),e.after(" <progress></progress> "),b(t).find(":input").addClass("disabled")},0)}),e.find(".cb-javascript-form input[type=button]").click(function(){var e=document.location,t=unescape(document.location.search.replace(/^\?/,"")),a=t.split("&"),i=b(this).closest(".cb-javascript-form").find(":input");i.each(function(){var e=b(this).attr("js-name");if(e?b(this).attr("name",e):e=b(this).attr("name"),e){e=e.replace(/\[\d+\]/,"[]");for(var t=a.length;0<t;)a[--t].replace(/=.*/,"").replace(/\[[0-9]+\]/,"[]")==e&&a.splice(t,1)}}),t=a.join("&"),t+="&",t+=i.serialize(),t+="&redirect="+escape(e),document.location=document.location.pathname+"?"+t}),e.find(".cb-template-type-available > .cb-details").click(function(e){var t=b(this).parent(),a=b(this).children(".cb-periodinst-selector"),i=b(this).attr("class").trim(),c=b(e.target).is(a),o=a.attr("checked");c&&(o=!o),o?(c||a.removeAttr("checked"),t.attr("class",i.replace(/cb-selected/,""))):(c||a.attr("checked","1"),t.attr("class",i+" cb-selected")),c||e.preventDefault()});var t,n=b("#datetime_part_period_start_date").val();function a(){var t=!0,e=b(this).find("select:visible");e.each(function(){var e=b(this).val();return e&&"__Null__"!=e||(t=!1),!t&&window.console&&console.info(b(this).attr("name")+" <select> not complete"),t}),t&&b(".cb-popup-form-next").click(),t&&window.console&&(console.info("all complete"+(e.length?"":" (none found)")),e.length&&console.log(e))}b("#datetime_part_period_end_date").val(),e.find("#datetime_part_period_start_date").change(function(){var e=new Date(b("#datetime_part_period_start_date").val()),t=new Date(b("#datetime_part_period_end_date").val()),a=new Date(n),i=e.getFullYear()-a.getFullYear(),c=e.getMonth()-a.getMonth(),o=e.getDate()-a.getDate(),s=b(this).closest("body,.cb-popup").find(".cb-popup-form-save");s.removeAttr("disabled"),isNaN(e.getTime())?(b(this).addClass("cb-error"),s.attr("disabled","1")):(b("#datetime_part_period_start_date, #datetime_part_period_end_date").hasClass("cb-error")||(t.setFullYear(t.getFullYear()+i),t.setMonth(t.getMonth()+c),t.setDate(t.getDate()+o),b("#datetime_part_period_end_date").val(cb_iso_date(t)),window.console&&console.info(i+"-"+c+"-"+o)),b("#datetime_part_period_start_date, #datetime_part_period_end_date").removeClass("cb-error"),t<e&&(b("#datetime_part_period_end_date").addClass("cb-error"),s.attr("disabled","1")),n=b(this).val(),b("#datetime_part_period_end_date").val())}),e.find("#datetime_part_period_end_date").change(function(){var e=new Date(b("#datetime_part_period_start_date").val()),t=new Date(b("#datetime_part_period_end_date").val()),a=b(this).closest("body,.cb-popup").find(".cb-popup-form-save");a.removeAttr("disabled"),isNaN(t.getTime())?(b(this).addClass("cb-error"),a.attr("disabled","1")):(b("#datetime_part_period_start_date, #datetime_part_period_end_date").removeClass("cb-error"),t<e&&(b("#datetime_part_period_end_date").addClass("cb-error"),a.attr("disabled","1")),b(this).val())}),e.find("#cb-SOT").click(function(){t=b(".cmb2-id-recurrence-type :input[checked]"),b("#recurrence_type1").click(),b(".cmb2-id-recurrence-type").slideUp(),b("#datetime_part_period_start_date").val(b("#datetime_period_inst_start_date").val()),b("#datetime_part_period_end_date").val(b("#datetime_period_inst_end_date").val())}),e.find("#cb-SFH, #cb-SAI").click(function(){b(".cmb2-id-recurrence-type").slideDown(),t&&t.click()}),e.find("#cb-save-types input").click(function(){var e=b('label[for="'+this.id+'"]').html();b("#cb-follow-cb-save-types").html(e)}),e.find(".cb-nexts").each(function(){var o=b(this).find("li"),e="",s=(o.find("a").each(function(){e+=(e?",":"")+b(this).attr("href")}),o.closest(".cb-popup,#post-body").find(e));if(s.css("overflow-y","hidden"),s.hide(),b(this).closest(".cb-popup,body").addClass("cb-with-nexts"),b(this).closest(".cb-popup,#post-body").removeClass("columns-2"),o.click(function(e){var t=b(this),a=t.find("a").attr("href"),i=t.closest(".cb-popup,body").find(a),c=s.filter(":visible");t.hasClass("cb-selected")||(o.removeClass("cb-selected"),o.addClass("cb-unselected"),t.addClass("cb-selected"),t.removeClass("cb-unselected"),i.css("width","100%"),c.css("width","100%"),c.css("height",c.height()),i.css("height",i.height()),i.css("width","0%"),i.show(),c.animate({width:"0%"},500,function(){c.hide(),c.css("height","auto")}),i.animate({width:"100%"},500,function(){i.css("height","auto"),i.focus()}),t.hasClass("cb-last")?(b(".cb-popup-form-next").hide(),b(".cb-popup-form-save").show()):(b(".cb-popup-form-next").show(),b(".cb-popup-form-save").hide())),e.preventDefault()}),o.length){var t=o.filter(".cb-selected");t.length||(t=o.eq(0));var a=t.find("a").attr("href"),i=t.closest(".cb-popup,body").find(a);t.addClass("cb-selected"),t.removeClass("cb-unselected"),i.show()}}),b(".cb-popup a.thickbox").click(function(e){var t=b("#TB_window").attr("class").match(/cb-popup-[^ ]+/g).join(" ");b("#TB_window").attr("class","cb-popup "+t)}),e.find(".cb-popup-form-next").click(function(){b(this).closest(".cb-popup,body").find(".cb-nexts li.cb-selected").next().click()}),b(".cb-popup-add #cb-tab-type li").click(function(){b(".cb-popup-form-next").click()}),e.find("#cb-tab-objects").change(a),e.find("#cb-tab-objects:visible").each(a),b(document).find(".toplevel_page_cb-menu > .wp-submenu > li").each(function(){var e,t;(e=b(this).children("a").attr("href"))&&((t=e.match(/[?&]page=([^&]+)/))?t.length&&b(this).addClass(t[1]):e.match(/[a-zA-Z_0-9]+/)&&b(this).addClass(e))}),e.find(".cmb2-radio-list > li").each(function(){var e=b(this),t=b(this).children("input"),a=b(this).children("label"),i=t.attr("name");"period_status_type_ID"==i&&(i="status");var c=i.toLowerCase().replace(/[^a-z]+/g,"-").replace(/^-+|-+$/g,""),o=t.val(),s=a.text().replace(/ .*$/,"").toLowerCase().replace(/[^a-z]+/g,"-").replace(/^-+|-+$/g,""),n="cb-"+c+"-";e.addClass(n+s),e.addClass(n+o)}),e.find("input[type=radio]").click(function(){b(this).closest("ul").children("li").removeClass("cb-selected"),b(this).closest("li").addClass("cb-selected")}),e.find("input[type=radio]:checked").each(function(){b(this).closest("ul").children("li").removeClass("cb-selected"),b(this).closest("li").addClass("cb-selected")}),e.find(".cb-add-class-advanced").click(function(){b(this).closest("body,.cb-popup,.cb-panel").addClass("cb-advanced")}),e.find(".cb-set-href-querystring").change(function(){var e=b(this).attr("name"),t=b(this).val().trim(),a=b(this).find("option:selected").html().trim(),i=b(this).closest("a"),c=i.attr("title"),o=i.attr("href").split("?"),s=o[0].trim(),n=1<o.length?o[1].trim():"",r=n.split("&"),d="cb-follow cb-follow-"+e.replace(/_/g,"-").replace(/[_-]ID$/g,"").replace(/[^a-z]+/g,"-").replace(/^-+|-+$/g,""),l=!1;for(var p in r)if(r[p].split("=")[0]==e){r[p]=e+"="+t,l=!0;break}l||(r[r.length]=e+"="+t),c=c.replace(/: .*/,""),n=r.join("&"),i.attr("href",s+"?"+n),i.attr("title",c+': <span class="'+d+'">'+a+"</span>")}),e.find(".cb-tabs").each(function(){var c=b(this).find("li"),e="",o=(c.find("a").each(function(){e+=(e?",":"")+b(this).attr("href")}),c.closest(".cb-popup,body").find(e));if(o.hide(),b(this).closest(".cb-popup,body").addClass("cb-with-tabs"),b(this).closest(".cb-popup,#post-body").removeClass("columns-2"),b(this).addClass("cb-processed"),c.click(function(e){var t=b(this),a=t.find("a").attr("href"),i=t.closest(".cb-popup,body").find(a);c.removeClass("cb-selected"),c.addClass("cb-unselected"),o.hide(),c.each(function(){var e=b(this).find("a").attr("href");e=e.replace(/^#/,""),b(this).closest(".cb-popup,body").removeClass("cb-tabs-"+e+"-selected")}),a=a.replace(/^#/,""),t.closest(".cb-popup,body").addClass("cb-tabs-"+a+"-selected"),t.addClass("cb-selected"),t.removeClass("cb-unselected"),i.focus(),i.show(),e.preventDefault()}),c.length){var t=c.filter(".cb-selected");t.length||(t=c.eq(0));var a=t.find("a").attr("href"),i=t.closest(".cb-popup,body").find(a);t.addClass("cb-selected"),t.removeClass("cb-unselected"),a=a.replace(/^#/,""),t.closest(".cb-popup,body").addClass("cb-tabs-"+a+"-selected"),i.show()}}),e.find(".cb-popup-form-trash").click(function(){var i=this,e=b(i).closest(".cb-ajax-edit-form"),t=e.find(":input").serialize(),a=e.attr("action-trash");b(i).attr("disabled","1"),b(i).parents(".cb-popup, body").addClass("cb-saving"),b.post({url:a,data:t,success:function(){b(i).removeAttr("disabled"),b(i).parents(".cb-popup, body").removeClass("cb-saving"),b(document.body).hasClass("cb-cb_DEBUG-on")||(document.location=document.location),b(i).parents(".cb-popup, body").addClass("cb-refreshing")},error:function(e){var t,a;b(i).parents(".cb-popup, body").removeClass("cb-saving"),b(i).parents(".cb-popup, body").addClass("cb-ajax-failed"),b(i).removeAttr("disabled"),console.log(e),(t=b(e.responseText))&&((a=t.filter("result").attr("message"))||(a="Unknown response"),alert(a))}})}),e.find(".cb-popup-form-save").click(function(){var i=this,e=b(i).closest(".cb-ajax-edit-form"),t=e.find(":input").serialize(),a=e.attr("action");b(i).attr("disabled","1"),b(i).parents(".cb-popup, body").addClass("cb-saving"),b.post({url:a,data:t,success:function(){b(i).removeAttr("disabled"),b(i).parents(".cb-popup, body").removeClass("cb-saving"),b(document.body).hasClass("cb-cb_DEBUG-on")||(document.location=document.location),b(i).parents(".cb-popup, body").addClass("cb-refreshing")},error:function(e){var t,a;b(i).parents(".cb-popup, body").removeClass("cb-saving"),b(i).parents(".cb-popup, body").addClass("cb-ajax-failed"),b(i).removeAttr("disabled"),console.log(e),(t=b(e.responseText))&&((a=t.filter("result").attr("message"))||(a="Unknown response"),alert(a))}})}),e.find(".cb-calendar-krumo-show").click(function(){b(this).parent().find(".cb-calendar-krumo").show()}),e.find("#TB_window #cb-fullscreen").click(function(){b("#TB_ajaxContent").css("max-width","none").css("width","auto").css("height","auto"),b("#TB_window").css("overflow-y","scroll").addClass("cb-fullscreen").animate({width:"100%",height:"100%",top:"0%",left:"0%",marginTop:"0px",marginLeft:"0px"})});var i=b(".cb-with-properties[name=location_ID]:visible, input[type=hidden].cb-with-properties[name=location_ID]");i.length?(console.info("attaching cb_object_selected to:"),console.log(i)):console.info("no cb-with-properties found"),i.on("cb_object_selected",function(e,t,a){var i=t&&t.last_opening_hours,c=b(".cb-period-group-id-OPH, .cb-period-entity-create-OPH, .cb-period-group-id-HRY, .cb-period-entity-create-HRY, .cb-ignore-location-restrictions"),o=b(".cb-period-group-id-CUS, .cb-period-entity-create-CUS"),s=b(".cb-period-group-id-OPH, .cb-period-entity-create-OPH"),n=b(this).closest("body,.cb-popup");n.removeClass("cb-has-opening-hours").removeClass("cb-no-opening-hours"),n.addClass(i?"cb-has-opening-hours":"cb-no-opening-hours"),i?(b(".cb-no-opening-hours-show").slideUp(),b(".cb-no-opening-hours-hide").slideDown(),c.css("opacity","1"),s.children("input").click()):(b(".cb-no-opening-hours-show").slideDown(),b(".cb-no-opening-hours-hide").slideUp(),c.css("opacity","0.5"),o.children("input").click()),window.console&&console.info("last_opening_hours object:"+t)}),b(document).on("cmb_init_pickers",function(e,t){if(t)for(picker in t)t[picker].attr("autocomplete","off")}),e.find("form").submit(function(){b(".cmb2-id-datetime-part-period-start .cmb2-datepicker, .cmb2-id-datetime-part-period-end .cmb2-datepicker")}),e.find(".cmb-type-text-datetime-timestamp").change(function(){var e=b(this).find(".cmb2-datepicker"),t=b(this).find(".cmb2-timepicker");e.length&&!e.val()&&t.val("")}),b("#cb-set-full-day").click(function(){var e=b(this).parents(".cmb-field-list");return e.find("#datetime_part_period_start_time").val("00:00"),e.find("#datetime_part_period_end_time").val("23:59"),!1}),e.find(":input").change(cb_update_followers),e.find("input[type=radio]").click(cb_update_followers),cb_update_followers(),b(".cmb2-id-datetime-part-period-start .cmb2-datepicker, .cmb2-id-datetime-part-period-end .cmb2-datepicker");var r=b(".cmb2-id-recurrence-sequence, .cmb2-id-datetime-from, .cmb2-id-datetime-to, .cmb2-id-period-explanation-selection"),c=b(".cmb2-id-recurrence-sequence"),d=c.find(".cmb2-checkbox-list"),l=c.find(".cmb2-checkbox-list").html(),p=r.find("input"),u=b("#datetime_part_period_start_date"),f=b("#datetime_part_period_end_date");r.hide(),e.find(".cmb2-id-recurrence-type input").click(function(){var e=b(this).val(),t=new Date(u.val());switch(f.val()&&new Date(f.val()),p.removeAttr("disabled"),r.removeClass("cb-disabled"),b(this).closest("form, #cb-ajax-edit-form").removeClass("cb-repeat-D cb-repeat-W cb-repeat-M cb-repeat-Y"),"__Null__"==e?r.slideUp():(r.slideDown(),b(this).closest("form, #cb-ajax-edit-form").addClass("cb-repeat-"+e)),e){case"__Null__":r.addClass("cb-disabled"),p.attr("disabled","1");break;case"D":b(".cmb2-id-period-explanation-selection .cb-description p").html(cb_dictionary.period_explanation_selection),d.html(l),d.slideDown();break;case"W":var a=cb_dayofweek_string(t);b(".cmb2-id-period-explanation-selection .cb-description p").html(cb_dictionary.period_repeats_weekly_on+a),d.slideUp(void 0,function(){d.html("")});break;case"M":var i=t.getDate(),c="th";switch(i%10){case 1:c="st";break;case 2:c="nd";break;case 3:c="rd"}var o=31==i?cb_dictionary.period_repeats_monthly:cb_dictionary.period_repeats_monthly_on+i+c+cb_dictionary.period_repeats_monthly_on_day;b(".cmb2-id-period-explanation-selection .cb-description p").html(o),d.slideUp(void 0,function(){d.html("")});break;case"Y":d.slideUp(void 0,function(){d.html("")});var s=t.getDate()+" of "+cb_month_string(t);b(".cmb2-id-period-explanation-selection .cb-description p").html(cb_dictionary.period_repeats_yearly_on+s+".")}}),e.find(".cmb2-id-recurrence-type input[checked]").click()}function cb_init_popup(){var e=window.jQuery,t=e("#TB_window .TB_window_classes");t.length&&(e("#TB_window").addClass(t.text()),t.remove());var a=e("#TB_window .TB_title_actions");a.length&&e("#TB_title").after(a);var i=e("#TB_window .TB_title_html").text();i.length&&e("#TB_window #TB_ajaxWindowTitle").prepend(i),cb_process.apply(this),window.CMB2&&(delete window.CMB2.$metabox,window.CMB2.init())}function cb_update_followers(){cb_update_follower.call(this,"location_ID"),cb_update_follower.call(this,"period_status_type_ID"),cb_update_follower.call(this,"datetime_part_period_start[date]")}function cb_update_follower(a){var i=jQuery,e=i(this).closest(".cb-popup");e.length||(e=i(document.body));var t=a.replace(/\]/,"\\]").replace(/\[/,"\\["),c=a.replace(/_/g,"-").replace(/[^a-zA-Z]+/g,"-").replace(/^-+|-+$/g,""),o=c.replace(/[_-]ID$/g,""),s=e.find(".cb-leader select#"+a).find("option:selected"),n=e.find(".cb-leader input:checked[type=radio][name="+t+"]"),r=e.find(".cb-leader input[type!=radio][name="+t+"]"),d=(s.length?s.attr("value"):"")+(n.length?n.val():"")+(r.length?r.val():""),l=(s.length?s.text():"")+(n.length?n.parent().children("label").text():"")+(r.length?r.attr("display-name")||r.val():"");(l=l.replace(/\(.*\)/,""))&&!l.match(/-- .* --/)||(l="not selected"),window.console&&console.info("[."+o+"] => ["+l+"]"),e.find(".cb-follow-"+c).html(d),e.find(".cb-follow-"+o).html(l),e.find("a.cb-follow").each(function(){var e=i(this).attr("href"),t=new RegExp(a+"=[^&]*","g");i(this).attr("href",e.replace(t,a+"="+d))})}function cb_dayofweek_string(e){return e instanceof Date?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]:void 0}function cb_month_string(e){return e instanceof Date?["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]:void 0}function cb_iso_date(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}!function(t){"use strict";t(document).ready(cb_process),t(document).on("cb-popup-appeared",function(){var e=t("#TB_window");e.length&&(window.console&&console.info("received event cb-popup-appeared"),cb_init_popup.apply(e.get(0)))})}(jQuery),function(e){"use strict";e(function(){e("#confirmed_user_ID").on("click",function(){e("#post").submit()})})}(jQuery),function(e){"use strict";e(function(){e(".admin-request-confirmation").on("click",function(){return confirm(e(this).data("confirmationstring"))})})}(jQuery);